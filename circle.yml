dependencies:
  override:
    - rvm-exec 1.9.3-p392 bundle install -j 4
    - rvm-exec 1.9.3-p392 bundle exec appraisal install -j 4
    - rvm-exec 2.0.0-p353 bundle install -j 4
    - rvm-exec 2.0.0-p353 bundle exec appraisal install -j 4
    - rvm-exec 2.2.2 bundle install -j 4
    - rvm-exec 2.2.2 bundle exec appraisal install -j 4
test:
  override:
    - RACK_ENV=development rvm-exec 1.9.3-p392 bundle exec appraisal rspec
    - RACK_ENV=production  rvm-exec 1.9.3-p392 bundle exec appraisal rspec
    - RACK_ENV=development rvm-exec 2.0.0-p353 bundle exec appraisal rspec
    - RACK_ENV=production  rvm-exec 2.0.0-p353 bundle exec appraisal rspec
    - RACK_ENV=development rvm-exec 2.2.2      bundle exec appraisal rspec
    - RACK_ENV=production  rvm-exec 2.2.2      bundle exec appraisal rspec
    - rvm-exec 2.2.2 bundle exec rubocop
deployment:
  gemfury:
    tag: /.*/
    commands:
      - "gem build loga.gemspec"
      - "curl -F package=@$(ls -t1 loga-*.gem | head -1) ${GEMFURY_PUSH_URI}"
